---
name: complete
description: Complete the current milestone — creates a pull request for merge into main
disable-model-invocation: true
---

# Complete Milestone

Finalize the current milestone and create a pull request.

## Step 1: Validate

1. Check all phases are verified (all in `phases.complete`)
2. Check current branch is the milestone branch
3. Check no uncommitted changes

If phases remain:
```
⚠️ Incomplete Phases
─────────────────────────────────────
The following phases are not yet verified:
  Phase {N}: {status}

→ Complete all phases before finishing the milestone.
```

## Step 2: Final Check

Run all CI commands one more time:
```bash
{config.ci.lint}
{config.ci.typecheck}
{config.ci.test}
{config.ci.build}
```

If any fail, report and stop.

## Step 3: Push Branch

```bash
git push -u origin $(git branch --show-current)
```

## Step 4: Create Pull Request

```bash
gh pr create \
  --title "{milestone}: {project_name}" \
  --body "## Milestone: {milestone}

### Phases Completed
{list of phases with titles}

### Summary
{brief summary of what was delivered}

### Verification
All phases verified with passing CI checks.

---
Generated by opti-gsd"
```

## Step 5: Update State

```json
{
  "status": "milestone_complete",
  "last_active": "{timestamp}"
}
```

## Step 6: Report

```
✓ Milestone Complete
─────────────────────────────────────
PR: {pr_url}

The pull request has been created.
Review and merge via your normal PR workflow.

After merge, update the plugin if this is opti-gsd itself:
  /plugin update opti-gsd
```
